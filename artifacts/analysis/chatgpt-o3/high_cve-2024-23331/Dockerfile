# Dockerfile.win (needs Windows host/VM)
FROM mcr.microsoft.com/windows/servercore:ltsc2022
RUN powershell -Command "wget https://nodejs.org/dist/v18.20.0/node-v18.20.0-x64.msi -OutFile node.msi; Start-Process msiexec -ArgumentList '/i','node.msi','/quiet','/norestart' -Wait"
WORKDIR C:/app
RUN npm create vite@4.1.4 vite-poc -y && cd vite-poc && npm i
WORKDIR C:/app/vite-poc
# create a fake secret we will try to protect
RUN echo "TOP_SECRET_TOKEN=abc123" > .env
COPY vite.config.js .            
EXPOSE 5173
CMD ["npm","run","dev","--","--host","0.0.0.0"]
